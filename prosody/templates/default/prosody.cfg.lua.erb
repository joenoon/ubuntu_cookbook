-- Generated by Chef for <%= node[:fqdn] %>.
-- Local modifications will be overwritten.

-- Prosody XMPP Server Configuration
-- 
-- Information on configuring Prosody can be found on our
-- website at http://prosody.im/doc/configure

admins = { <%= node[:prosody][:admins].map {|x| x.inspect }.join(", ") %> }

use_libevent = <%= node[:prosody][:use_libevent] %>;

modules_enabled = { <%= node[:prosody][:modules_enabled].map {|x| x.inspect }.join(", ") %> }

modules_disabled = { <%= node[:prosody][:modules_disabled].map {|x| x.inspect }.join(", ") %> }

pidfile = "<%= node[:prosody][:pidfile] %>";

allow_registration = <%= node[:prosody][:allow_registration] %>;

<% if node[:prosody][:ssl] %>
ssl = {
	key = "<%= node[:prosody][:ssl][:key] %>";
	certificate = "<%= node[:prosody][:ssl][:certificate] %>";
}
<% end %>

log = {
  <% node[:prosody][:log].each_pair do |min, filename| %>
    { levels = { min = "<%= min %>" }, to = "file", filename = "<%= filename %>" };
  <% end %>
}

<%= node[:prosody][:additional_config] %>
